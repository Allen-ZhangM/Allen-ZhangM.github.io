<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Go语言学习笔记（七） 系统类型</title>
  <meta name="description" content="系统类型">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Go语言学习笔记（七） 系统类型">
  <meta name="twitter:description" content="系统类型">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Go语言学习笔记（七） 系统类型">
  <meta property="og:description" content="系统类型">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2018/04/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%83-%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B/">
  <!--
  <link rel="alternate" type="application/rss+xml" title="Allen Zhang" href="http://localhost:4000/feed.xml">
  -->
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 Allen Zhang 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Allen Zhang logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Allen Zhang" class="blog-button">Allen Zhang</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">一个记录我工作、学习历程的博客</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">新学期，新气象；百尺竿头，更进一步……</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">我不生产知识，只是知识的搬运工</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="Visit blog" class="blog-button">Blog</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/Allen-ZhangM" title="@Allen-ZhangM 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  <!-- RSS -->
  <!--
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>
	-->

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:allenzhanglearner@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-blue"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2018-04-10 00:00:00 +0800" itemprop="datePublished" class="post-meta__date date">2018-04-10</time> &#8226; <span class="post-meta__tags tags"></span>
    </div>
    <h1 class="post-title">Go语言学习笔记（七） 系统类型</h1>
  </header>

  <section class="post">
    <h2 id="系统类型">系统类型</h2>

<p>对于面向对象编程的支持Go 语言设计得非常简洁而优雅。简洁之处在于，Go语言并没有沿袭传统面向对象编程中的诸多概念，比如继承、虚函数、构造函数和析构函数、隐藏的this指针等。优雅之处在于，Go语言对面向对象编程的支持是语言类型系统中的天然组成部分。整个类型系统通过接口串联，浑然一体。</p>

<p>在Java语言中，存在两套完全独立的类型系统：一套是值类型系统，主要是基本类型，如byte、int、boolean、char、double等，这些类型基于值语义；一套是以Object类型为根的对象类型系统，这些类型可以定义成员变量和成员方法，可以有虚函数，基于引用语义，只允许在堆上创建（通过使用关键字new）。</p>

<p>Java语言中的Any类型就是整个对象类型系统的根——java.lang.Object类型，只有对象类型系统中的实例才可以被Any类型引用。值类型想要被Any类型引用，需要装箱（boxing）过程，比如int类型需要装箱成为Integer类型。另外，只有对象类型系统中的类型才可以实现接口，具体方法是让该类型从要实现的接口继承。相比之下，Go语言中的大多数类型都是值语义，并且都可以包含对应的操作方法。在需要的时候，你可以给任何类型（包括内置类型）“增加”新方法。而在实现某个接口时，无需从该接口继承（事实上，Go语言根本就不支持面向对象思想中的继承语法），只需要实现该接口要求的所有方法即可。任何类型都可以被Any类型引用。Any类型就是空接口，即interface{}。</p>

<p>你可以给任意类型（包括内置类型，但不包括指针类型）添加相应的方法，它和int没有本质不同，只是它为内置的int类型增加了个新方法Less()。</p>

<pre><code class="language-Go">type Integer int
func (a Integer) Less(b Integer) bool {
    return a &lt; b
}
</code></pre>

<p>“在Go语言中没有隐藏的this指针”这句话的含义是：</p>

<ul>
  <li>方法施加的目标（也就是“对象”）显式传递，没有被隐藏起来；</li>
  <li>方法施加的目标（也就是“对象”）不需要非得是指针，也不用非得叫this。</li>
</ul>

<p>为Integer类型增加了Add()方法。由于Add()方法需要修改对象的值，所以需要用指针引用。</p>

<pre><code class="language-Go">func (a *Integer) Add(b Integer) {
    *a += b
}
</code></pre>

<p>Integer类型其实就是一个int，但通过为int起一个Integer别名并增加了一系列方法，它就变成了一个全新的类型，但这个新类型又完全拥有int的功能。</p>

<h2 id="值语义和引用语义">值语义和引用语义</h2>

<p>Go语言中的数组和基本类型没有区别，是很纯粹的值类型，例如：</p>

<pre><code class="language-Go">var a = [3]int{1, 2, 3}
var b = a
b[1]++
fmt.Println(a, b)
</code></pre>

<p>该程序的运行结果如下：</p>

<pre><code class="language-Go">[1 2 3] [1 3 3]
</code></pre>

<p>这表明b=a赋值语句是数组内容的完整复制。要想表达引用，需要用指针：</p>

<pre><code class="language-Go">var a = [3]int{1, 2, 3}
var b = &amp;a
b[1]++
fmt.Println(a, *b)
</code></pre>

<p>该程序的运行结果如下：</p>

<pre><code class="language-Go">[1 3 3] [1 3 3]
</code></pre>

<p>这表明b=&amp;a赋值语句是数组内容的引用。变量b的类型不是[3]int，而是*[3]int类型。</p>

<h2 id="结构体">结构体</h2>

<p>Go语言的结构体（struct）和其他语言的类（class）有同等的地位，但Go语言放弃了包括继承在内的大量面向对象特性，只保留了组合（composition）这个最基础的特性。</p>

<p>所有的Go语言类型（指针类型除外）都可以有自己的方法。在这个背景下，Go语言的结构体只是很普通的复合类型：</p>

<pre><code class="language-Go">type Rect struct {
    x, y float64
    width, height float64
}
func (r *Rect) Area() float64 {
    return r.width * r.height
}
</code></pre>

<h2 id="初始化">初始化</h2>

<p>创建并初始化Rect类型的对象实例：</p>

<pre><code class="language-Go">rect1 := new(Rect)
rect2 := &amp;Rect{}
rect3 := &amp;Rect{0, 0, 100, 200}
rect4 := &amp;Rect{width: 100, height: 200}
</code></pre>

<p>在Go语言中，未进行显式初始化的变量都会被初始化为该类型的零值，例如bool类型的零值为false，int类型的零值为0，string类型的零值为空字符串。在Go语言中没有构造函数的概念，对象的创建通常交由一个全局的创建函数来完成，以NewXXX来命名，表示“构造函数”：</p>

<pre><code class="language-Go">func NewRect(x, y, width, height float64) *Rect {
    return &amp;Rect{x, y, width, height}
}
</code></pre>

<h2 id="匿名组合">匿名组合</h2>

<p>Go语言也提供了继承，但是采用了组合的文法，所以我们将其称为匿名组合：</p>

<pre><code class="language-Go">type Base struct {
    Name string
}
func (base *Base) Foo() { ... }
func (base *Base) Bar() { ... }
type Foo struct {
    Base
    ...
}
func (foo *Foo) Bar() {
    foo.Base.Bar()
    ...
}

</code></pre>

<p>以上代码定义了一个Base类（实现了Foo()和Bar()两个成员方法），然后定义了一个Foo类，该类从Base类“继承”并改写了Bar()方法（该方法实现时先调用了基类的Bar()方法）。在“派生类”Foo没有改写“基类”Base的成员方法时，相应的方法就被“继承”，例如在上面的例子中，调用foo.Foo()和调用foo.Base.Foo()效果一致。</p>

<h2 id="可见性">可见性</h2>

<p>要使某个符号对其他包（package）可见（即可以访问），需要将该符号定义为以大写字母开头，如：</p>

<pre><code class="language-Go">//Rect类型的成员变量就全部被导出了
type Rect struct {
    X, Y float64
    Width, Height float64
}
//Rect的area()方法只能在该类型所在的包内使用
func (r *Rect) area() float64 {
    return r.Width * r.Height
}
</code></pre>

<p>需要注意的一点是，Go语言中符号的可访问性是包一级的而不是类型一级的。在上面的例子中，尽管area()是Rect的内部方法，但同一个包中的其他类型也都可以访问到它。这样的可访问性控制很粗旷，很特别，但是非常实用。</p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2018/04/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%85%AB-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="link to Go语言学习笔记（八） 面向对象">Go语言学习笔记（八） 面向对象</a></h2>
       <p class="excerpt">go并不是一个纯面向对象的编程语言。在go中的面向对象，结构体替换了类。Go并没有提供类class，但是它提供了结构体struct，方法method，可以在结构体上添加。提供了捆绑数据和方法的行为，这些数据和方法与类类似。定义结构体和方法创建一个外部可访问的Employee结构体，并为这个结构体定义一个方法LeavesRemaining()package employeeimport (    "fmt")type Employee struct {    FirstName   stri...&hellip;</p>
       <div class="post-list__meta"><time datetime="2018-04-11 00:00:00 +0800" class="post-list__meta--date date">2018-04-11</time> &#8226; <span class="post-list__meta--tags tags"></span><a class="btn-border-small" href=/2018/04/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%85%AB-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/>继续阅读</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2018/04/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%85%AD-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" title="link to Go语言学习笔记（六） 错误处理">Go语言学习笔记（六） 错误处理</a></h2>
       <p class="excerpt">error接口Go语言引入了一个关于错误处理的标准模式，即error接口，该接口的定义如下：type error interface {Error() string}对于大多数函数，如果要返回错误，大致上都可以定义为如下模式，将error作为多种返回值中的最后一个，但这并非是强制要求：func Foo(param int)(n int, err error) {// ...}调用时的代码建议按如下方式处理错误情况：n, err := Foo(0)if err != nil {// 错误处理...&hellip;</p>
       <div class="post-list__meta"><time datetime="2018-04-08 00:00:00 +0800" class="post-list__meta--date date">2018-04-08</time> &#8226; <span class="post-list__meta--tags tags"></span><a class="btn-border-small" href=/2018/04/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%85%AD-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://localhost:4000/2018/04/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%83-%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B/";
        this.page.identifier = "/2018/04/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%83-%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B/";
    };

    var disqus_shortname = 'vno-jekyll';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
<!--
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2018-11-05 生成，感谢 <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> 为本站提供稳定的 VPS 服务</span>
        <span class="footer__copyright">本站由 <a href="http://onev.cat">@onevcat</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2018</span>
    </footer>
-->
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
